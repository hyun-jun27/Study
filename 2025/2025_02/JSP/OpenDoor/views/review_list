<%@ page language="java" contentType="text/html; charset=UTF-8" pageEncoding="UTF-8"%>
<%@ taglib prefix="c" uri="jakarta.tags.core" %>

<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>ëª¨ë‘ì˜ ì¥ì†Œ - ë¦¬ë·° ëª©ë¡</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@400;700&display=swap" rel="stylesheet">
    <style>
        body { font-family: 'Noto Sans KR', sans-serif; background-color: #f8f9fa; }
        .table-hover tbody tr:hover { background-color: #f1f3f5; }
    </style>
</head>
<body>

    <nav class="navbar navbar-expand-lg navbar-dark bg-primary mb-5 shadow-sm">
        <div class="container">
            <a class="navbar-brand fw-bold" href="/review/list">â™¿ ëª¨ë‘ì˜ ì¥ì†Œ</a>
            <div class="collapse navbar-collapse">
                <ul class="navbar-nav ms-auto align-items-center">
                    <li class="nav-item"><a class="nav-link active" href="/review/list">í™ˆ</a></li>
                    
                    <c:choose>
                        <%-- 1. ë¡œê·¸ì¸ ì•ˆ í–ˆì„ ë•Œ --%>
                        <c:when test="${empty sessionScope.loginMember}">
                            <li class="nav-item">
                                <a class="nav-link btn btn-outline-light ms-2 px-3 border-0" href="/member/login">ë¡œê·¸ì¸</a>
                            </li>
                        </c:when>
                        <%-- 2. ë¡œê·¸ì¸ í–ˆì„ ë•Œ --%>
					<c:otherwise>
                        <li class="nav-item me-2">
                            <a class="btn btn-outline-light btn-sm fw-bold border-0" href="/review/my">
                                ğŸ‘¤ ${sessionScope.loginMember.nickname}ë‹˜
                                <span class="badge bg-light text-primary ms-1">${sessionScope.loginMember.role}</span>
                            </a>
                        </li>
                        
                        <li class="nav-item">
                            <a class="nav-link btn btn-sm btn-danger text-white px-3" href="/member/logout">ë¡œê·¸ì•„ì›ƒ</a>
                        </li>
                    </c:otherwise>
                    </c:choose>
                </ul>
            </div>
        </div>
    </nav>

    <div class="container">
        <div class="row align-items-center mb-4">
            <div class="col">
                <h2 class="fw-bold text-dark">ğŸ“‹ ì¥ì†Œ ë¦¬ë·° ëª©ë¡</h2>
                <div class="container">
		        	<div class="row align-items-center mb-4">
		            </div>
			        <div class="mb-3 d-flex justify-content-start">
			            <h5 class="me-3 fw-bold">ì¹´í…Œê³ ë¦¬ í•„í„°:</h5>
			            <a href="/review/list" class="btn btn-sm ${empty currentFilter ? 'btn-primary' : 'btn-outline-primary'} me-2">ì „ì²´</a>
			            <a href="/review/list?filter=ì¹´í˜" class="btn btn-sm ${currentFilter eq 'ì¹´í˜' ? 'btn-primary' : 'btn-outline-primary'} me-2">ì¹´í˜</a>
			            <a href="/review/list?filter=ì‹ë‹¹" class="btn btn-sm ${currentFilter eq 'ì‹ë‹¹' ? 'btn-primary' : 'btn-outline-primary'} me-2">ì‹ë‹¹</a>
			            <a href="/review/list?filter=ê¸°íƒ€" class="btn btn-sm ${currentFilter eq 'ê¸°íƒ€' ? 'btn-primary' : 'btn-outline-primary'}">ê¸°íƒ€</a>
			        </div>
                <p class="text-muted">ìš°ë¦¬ ë™ë„¤ì˜ ë°°ë¦¬ì–´ í”„ë¦¬(Barrier-Free) ì •ë³´ë¥¼ í™•ì¸í•˜ì„¸ìš”.</p>
            </div>
			<div class="col-auto text-end">
			    <a href="/review/create" class="btn btn-success btn-lg shadow">
			        âœï¸ ë¦¬ë·° ì‘ì„±í•˜ê¸°
			    </a>
			</div>
        </div>

        <div class="card shadow-sm border-0">
            <div class="card-body p-0">
                <table class="table table-hover table-striped mb-0 text-center align-middle">
                    <thead class="table-light">
                        <tr>
                            <th scope="col">#</th>
                            <th scope="col" style="width: 15%;">ì¥ì†Œëª…</th>
                            <th scope="col" style="width: 40%;">ë¦¬ë·° ë‚´ìš©</th> <th scope="col">ì¹´í…Œê³ ë¦¬</th> 
                            <th scope="col">ê²½ì‚¬ë¡œ</th>
                            <th scope="col">ì—˜ë¦¬ë² ì´í„°</th>
                            <th scope="col">í™”ì¥ì‹¤</th>
                            <th scope="col">ì‘ì„±ì</th>
                        </tr>
                    </thead>
                    <tbody>
                        <c:forEach var="review" items="${reviews}">
                            <tr>
                                <td>${review.id}</td>
                                <td class="fw-bold text-primary">${review.place.placeName}</td>
                                
                                <td class="text-start" style="width: 40%; white-space: normal;">
                                    ${review.content}
                                </td>
                                
                                <td>${review.place.category}</td> 

                                <td>
                                    <span class="badge rounded-pill ${review.hasRamp == 'Y' ? 'text-bg-primary' : 'text-bg-secondary'}">
                                        ${review.hasRamp == 'Y' ? 'ìˆìŒ' : 'ì—†ìŒ'}
                                    </span>
                                </td>
                                <td>
                                    <span class="badge rounded-pill ${review.hasElevator == 'Y' ? 'text-bg-primary' : 'text-bg-secondary'}">
                                        ${review.hasElevator == 'Y' ? 'ìˆìŒ' : 'ì—†ìŒ'}
                                    </span>
                                </td>
                                <td>
                                    <span class="badge rounded-pill ${review.hasToilet == 'Y' ? 'text-bg-primary' : 'text-bg-secondary'}">
                                        ${review.hasToilet == 'Y' ? 'ìˆìŒ' : 'ì—†ìŒ'}
                                    </span>
                                </td>
                                
                                <td><small class="text-muted">${review.member.nickname}</small></td>
                            </tr>
                        </c:forEach>

                        <c:if test="${empty reviews}">
                            <tr>
                                <td colspan="8" class="py-5 text-muted">ë“±ë¡ëœ ë¦¬ë·°ê°€ ì—†ìŠµë‹ˆë‹¤. ì²« ë¦¬ë·°ì˜ ì£¼ì¸ê³µì´ ë˜ì–´ë³´ì„¸ìš”!</td>
                            </tr>
                        </c:if>
                    </tbody>
                </table>
            </div>
        </div>
        
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>
